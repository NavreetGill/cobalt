<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cobalt / Starboard Modules - Reference Guide</title>

            <!-- Webfont -->
    
    <link href='http://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    

    
    <!-- Material Design Lite -->
    <link href="/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/assets/material-design-lite/material.min.js"></script>

    <!-- Include the common site javascript -->
    <script src="/js/common.js" type="text/javascript" charset="utf-8"></script>


    <!-- metadata -->
    <meta name="og:title" content="Cobalt / Starboard Modules - Reference Guide"/>
    <meta name="og:image" content="/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
  </head>
  <body class="docs" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>



    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">
        <img class="logo" src="/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
        
  
    
  
  
    
      <li><a href="/starboard/porting.html">Porters</a></li>
    
  

  
    
  
  
    
      <li><a href="/development/quick-start.html">Developers</a></li>
    
  

  
    
  
  
    
      <li><a href="/contributors/index.html">Contributors</a></li>
    
  

  
    
  
  
    
      <li><a href="/blog/">Blog</a></li>
    
  

  
    
  
  
    
      
        <li><a href="https://github.com/"><i class="fa fa-github"></i> Code Repo</a></li>
      
    
  


      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu no-top-margin">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  


        <li><a href="https://github.com/" id="collapsed-left-menu-repo-link"><i class="fa fa-github"></i> GitHub</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>


    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Starboard Modules - Reference Guide</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu no-top-margin">Porters</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/starboard/porting.html">Port Cobalt to your platform</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/reference/starboard/configuration-public.html">configuration_public.h</a></li>
              
            
              
        <li><a href="/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
              
            
              
                <li><b>Starboard modules</b>
                
          <ul>
                  
                    
                      <li><a href="/reference/starboard/modules/atomic.html">atomic.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/blitter.html">blitter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/character.html">character.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/configuration.html">configuration.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/directory.html">directory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/double.html">double.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/drm.html">drm.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/event.html">event.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/export.html">export.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/file.html">file.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/input.html">input.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/key.html">key.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/log.html">log.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/media.html">media.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/memory.html">memory.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/mutex.html">mutex.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/once.html">once.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/player.html">player.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/queue.html">queue.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket.html">socket.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/storage.html">storage.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/string.html">string.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/system.html">system.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread.html">thread.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time.html">time.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/types.html">types.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/user.html">user.h</a></li>
                    
                  
                    
                      <li><a href="/reference/starboard/modules/window.html">window.h</a></li>
                    
                  
          </ul>
                
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
        
          <h4 class="submenu">Developers</h4>
        
      
  <ul class="content">
      
        
    <li><b>Guides</b>
          
      <ul>
            
              
        <li><a href="/development/setup-linux.html">Setup - Linux</a></li>
              
            
              
        <li><a href="/development/setup-raspi.html">Setup - RasPi</a></li>
              
            
      </ul>
    </li>
          
        
      
        
    <li><b>Reference</b>
          
      <ul>
            
              
        <li><a href="/development/reference/supported-features.html">Cobalt support</a></li>
              
            
      </ul>
    </li>
          
        
      
  </ul>
    
</li>
  

  
<li class="expand-container" data-expander-target-search="relative">
    
      
      
<h4 class="no-submenu"><a href="/contributors/index.html">Contributors</a></h4>
      
    
</li>
  


      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
          <div id="rightCol-share-buttons" class="share-buttons-bottom">
            

  
    
      <script type="text/javascript">
        createShareButton("facebook", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "right");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("google_plus", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "right");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("reddit", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "right");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("twitter", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "right");
      </script>
    
  


          </div>
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <h2 id="atomic-h">atomic.h</h2>

<h2 id="audio_sink-h">audio_sink.h</h2>

<h4 id="sbaudiosinkcreate">SbAudioSinkCreate</h4>

<p>Creates an audio sink for the specified <code class="prettyprint">channels</code> and <code class="prettyprint">sampling_frequency_hz</code>, acquiring all resources needed to operate it, and returning an opaque handle to it.  <code class="prettyprint">frame_buffers</code> is an array of pointers to sample data.  If the sink is operating in interleaved mode, the array contains only one element, which is an array containing <code class="prettyprint">frames_per_channel</code> * <code class="prettyprint">channels</code> samples.  If the sink is operating in planar mode, the number of elements in the array will be the same as <code class="prettyprint">channels</code>, each of the elements will be an array of <code class="prettyprint">frames_per_channel</code> samples.  The caller has to ensure that <code class="prettyprint">frame_buffers</code> is valid until SbAudioSinkDestroy is called.  <code class="prettyprint">update_source_status_func</code> cannot be NULL.  The audio sink will call it on an internal thread to query the status of the source.  <code class="prettyprint">consume_frames_func</code> cannot be NULL.  The audio sink will call it on an internal thread to report consumed frames.  <code class="prettyprint">context</code> will be passed back into all callbacks, and is generally used to point at a class or struct that contains state associated with the audio sink.  The audio sink will start to call <code class="prettyprint">update_source_status_func</code> immediately after SbAudioSinkCreate is called, even before it returns.  The caller has to ensure that the above callbacks returns meaningful values in this case.  If the particular platform doesn&#39;t support the requested audio sink, the function returns kSbAudioSinkInvalid without calling any of the callbacks.</p>

<h4 id="sbaudiosinkdestroy">SbAudioSinkDestroy</h4>

<p>Destroys <code class="prettyprint">audio_sink</code>, freeing all associated resources.  It will wait until all callbacks in progress is finished before returning.  Upon returning of this function, no callbacks passed into SbAudioSinkCreate will be called further.  This function can be called on any thread but cannot be called within any of the callbacks passed into SbAudioSinkCreate. It is not allowed to pass <code class="prettyprint">audio_sink</code> into any other SbAudioSink function once SbAudioSinkDestroy has been called on it.</p>

<h4 id="sbaudiosinkgetmaxchannels">SbAudioSinkGetMaxChannels</h4>

<p>Returns the maximum channel supported on the platform.</p>

<h4 id="sbaudiosinkgetnearestsupportedsamplefrequency">SbAudioSinkGetNearestSupportedSampleFrequency</h4>

<p>Returns the nearest supported sample rate of <code class="prettyprint">sampling_frequency_hz</code>.  On platforms that don&#39;t support all sample rates, it is the caller&#39;s responsibility to resample the audio frames into the supported sample rate returned by this function.</p>

<h4 id="sbaudiosinkisaudioframestoragetypesupported">SbAudioSinkIsAudioFrameStorageTypeSupported</h4>

<p>Returns true if the particular SbMediaAudioFrameStorageType is supported on this platform.</p>

<h4 id="sbaudiosinkisaudiosampletypesupported">SbAudioSinkIsAudioSampleTypeSupported</h4>

<p>Returns true if the particular SbMediaAudioSampleType is supported on this platform.</p>

<h4 id="sbaudiosinkisvalid">SbAudioSinkIsValid</h4>

<p>Returns whether the given audio sink handle is valid.</p>

<h2 id="blitter-h">blitter.h</h2>

<h4 id="sbblitterblitrecttorect">SbBlitterBlitRectToRect</h4>

<p>Issues a draw call on <code class="prettyprint">context</code> that blits an area of <code class="prettyprint">source_surface</code> specified by a <code class="prettyprint">src_rect</code> to <code class="prettyprint">context</code>&#39;s current render target at <code class="prettyprint">dst_rect</code>. The source rectangle must lie within the dimensions of <code class="prettyprint">source_surface</code>.  The <code class="prettyprint">source_surface</code>&#39;s alpha will be modulated by <code class="prettyprint">opacity</code> before being drawn. For <code class="prettyprint">opacity</code>, a value of 0 implies complete invisibility and a value of 255 implies complete opaqueness. This function is not thread safe. Returns whether the draw call succeeded.</p>

<h4 id="sbblitterblitrecttorecttiled">SbBlitterBlitRectToRectTiled</h4>

<p>This function does the exact same as SbBlitterBlitRectToRect(), except it permits values of <code class="prettyprint">src_rect</code> outside of the dimensions of <code class="prettyprint">source_surface</code> and in these regions the pixel data from <code class="prettyprint">source_surface</code> will be wrapped.  Negative values for <code class="prettyprint">src_rect.x</code> and <code class="prettyprint">src_rect.y</code> are allowed.  The output will all be stretched to fit inside of <code class="prettyprint">dst_rect</code>. This function is not thread safe. Returns whether the draw call succeeded.</p>

<h4 id="sbblitterblitrectstorects">SbBlitterBlitRectsToRects</h4>

<p>This function achieves the same effect as calling SbBlitterBlitRectToRect() <code class="prettyprint">num_rects</code> time with each of the <code class="prettyprint">num_rects</code> values of <code class="prettyprint">src_rects</code> and <code class="prettyprint">dst_rects</code>.  Using this function allows for greater efficiency than calling SbBlitterBlitRectToRect() in a loop. This function is not thread safe. Returns whether the draw call succeeded.</p>

<h4 id="sbblittercreatecontext">SbBlitterCreateContext</h4>

<p>Creates a SbBlitterContext object on the specified <code class="prettyprint">device</code>.  The returned context can be used to setup draw state and issue draw calls.  Note that there is a limit on the number of contexts that can exist at the same time (in many cases this is 1), and this can be queried by calling SbBlitterGetMaxContexts().  SbBlitterContext objects keep track of draw state between a series of draw calls.  Please refer to the documentation around the definition of SbBlitterContext for more information about contexts. This function is thread safe. This function returns kSbBlitterInvalidContext upon failure.</p>

<h4 id="sbblittercreatedefaultdevice">SbBlitterCreateDefaultDevice</h4>

<p>Creates and returns a SbBlitterDevice object based on the Blitter API implementation&#39;s decision of which device should be default.  The SbBlitterDevice object represents a connection to a device (like a GPU).  On many platforms there is always one single obvious choice for a device to use, and that is the one that this function will return.  For example, if this is called on a platform that has a single GPU, a device representing that GPU should be returned by this call.  On a platform that has no GPU, a device representing a software CPU implementation may be returned.  Only one default device can exist within a process at a time. This function is thread safe. Returns kSbBlitterInvalidDevice on failure.</p>

<h4 id="sbblittercreatepixeldata">SbBlitterCreatePixelData</h4>

<p>Allocates a SbBlitterPixelData object through <code class="prettyprint">device</code> with <code class="prettyprint">width</code>, <code class="prettyprint">height</code> and <code class="prettyprint">pixel_format</code>.  <code class="prettyprint">pixel_format</code> must be supported by <code class="prettyprint">device</code> (see SbBlitterIsPixelFormatSupportedByPixelData()).  Calling this function will result in the allocation of CPU-accessible (though perhaps blitter-device-resident) memory to store pixel data of the requested size/format. A SbBlitterPixelData object should either eventually be passed into a call to SbBlitterCreateSurfaceFromPixelData(), or passed into a call to SbBlitterDestroyPixelData(). This function is thread safe. Returns kSbBlitterInvalidPixelData upon failure.</p>

<h4 id="sbblittercreaterendertargetsurface">SbBlitterCreateRenderTargetSurface</h4>

<p>Creates a new surface with undefined pixel data on <code class="prettyprint">device</code> with the specified <code class="prettyprint">width</code>, <code class="prettyprint">height</code> and <code class="prettyprint">pixel_format</code>.  One can set the pixel data on the resulting surface by getting its associated SbBlitterRenderTarget object by calling SbBlitterGetRenderTargetFromSurface(). This function is thread safe. Returns kSbBlitterInvalidSurface upon failure.</p>

<h4 id="sbblittercreatesurfacefrompixeldata">SbBlitterCreateSurfaceFromPixelData</h4>

<p>Creates a SbBlitterSurface object on <code class="prettyprint">device</code> (which must match the device used to create the input SbBlitterPixelData object, <code class="prettyprint">pixel_format</code>). This function will destroy the input <code class="prettyprint">pixel_data</code> object and so <code class="prettyprint">pixel_data</code> should not be accessed again after this function is called. The returned surface cannot be used as a render target (e.g. calling SbBlitterGetRenderTargetFromSurface() on it will return SbBlitterInvalidRenderTarget). This function is thread safe with respect to <code class="prettyprint">device</code>, however <code class="prettyprint">pixel_data</code> should not be modified on another thread while this function is called. kSbBlitterInvalidSurface is returned if there was an error.</p>

<h4 id="sbblittercreateswapchainfromwindow">SbBlitterCreateSwapChainFromWindow</h4>

<p>Creates and returns a SbBlitterSwapChain object that can be used to send graphics to the display.  By calling this function, <code class="prettyprint">device</code> will be linked to <code class="prettyprint">window</code>&#39;s output and drawing to the returned swap chain will result in <code class="prettyprint">device</code> being used to render to <code class="prettyprint">window</code>.  kSbBlitterInvalidSwapChain is returned on failure. This function must be called from the thread that called SbWindowCreate() to create <code class="prettyprint">window</code>.</p>

<h4 id="sbblitterdestroycontext">SbBlitterDestroyContext</h4>

<p>Destroys the specified <code class="prettyprint">context</code> created by <code class="prettyprint">device</code>, freeing all its resources. This function is not thread safe. Returns whether the destruction succeeded.</p>

<h4 id="sbblitterdestroydevice">SbBlitterDestroyDevice</h4>

<p>Destroys <code class="prettyprint">device</code>, cleaning up all resources associated with it. Returns whether the destruction succeeded. This function is thread safe, though of course it should not be called if <code class="prettyprint">device</code> is still being accessed elsewhere.</p>

<h4 id="sbblitterdestroypixeldata">SbBlitterDestroyPixelData</h4>

<p>Destroys the <code class="prettyprint">pixel_data</code> object.  Note that if SbBlitterCreateSurfaceFromPixelData() has been called on <code class="prettyprint">pixel_data</code> before, this function does not need to be and should not be called. This function is thread safe. Returns whether the destruction succeeded.</p>

<h4 id="sbblitterdestroysurface">SbBlitterDestroySurface</h4>

<p>Destroys <code class="prettyprint">surface</code>, cleaning up all resources associated with it. This function is not thread safe. Returns whether the destruction succeeded.</p>

<h4 id="sbblitterdestroyswapchain">SbBlitterDestroySwapChain</h4>

<p>Destroys <code class="prettyprint">swap_chain</code>, cleaning up all resources associated with it. This function must be called on the same thread that called SbBlitterCreateSwapChainFromWindow(). This function is not thread safe. Returns the destruction succeeded.</p>

<h4 id="sbblitterdownloadsurfacepixels">SbBlitterDownloadSurfacePixels</h4>

<p>Downloads <code class="prettyprint">surface</code> pixel data into CPU memory pointed to by <code class="prettyprint">out_pixel_data</code>, formatted according to the requested <code class="prettyprint">pixel_format</code> and the requested <code class="prettyprint">pitch_in_bytes</code>.  Thus, <code class="prettyprint">out_pixel_data</code> must point to a region of memory with a size of surface_height * <code class="prettyprint">pitch_in_bytes</code> * SbBlitterBytesPerPixelForFormat(pixel_format) bytes.  The function SbBlitterIsPixelFormatSupportedByDownloadSurfacePixels() can be called first to check that your requested <code class="prettyprint">pixel_format</code> is valid for <code class="prettyprint">surface</code>.  When this function is called, it will first wait for all previously flushed graphics commands to be executed by the device before downloading the data. Since this function waits for the pipeline to empty, it should be used sparingly, such as within in debug or test environments.  The returned alpha format will be premultiplied. This function is not thread safe. Returns whether the pixel data was downloaded successfully or not.</p>

<h4 id="sbblitterfillrect">SbBlitterFillRect</h4>

<p>Issues a draw call on <code class="prettyprint">context</code> that fills a rectangle <code class="prettyprint">rect</code>.  The color of the rectangle is specified by the last call to SbBlitterSetColor(). This function is not thread safe. Returns whether the draw call succeeded.</p>

<h4 id="sbblitterflipswapchain">SbBlitterFlipSwapChain</h4>

<p>Flips <code class="prettyprint">swap_chain</code>, making the buffer that was previously accessible to draw commands via SbBlitterGetRenderTargetFromSwapChain() now visible on the display, while another buffer in an initially undefined state is setup as the draw command target.  Note that you do not need to call SbBlitterGetRenderTargetFromSwapChain() again after flipping, the swap chain&#39;s render target will always refer to its current back buffer.  This function will stall the calling thread until the next vertical refresh. Note that to ensure consistency with the Starboard Player API when rendering punch-out video, calls to SbPlayerSetBounds() will not take effect until this method is called. This function is not thread safe. Returns whether the flip succeeded.</p>

<h4 id="sbblitterflushcontext">SbBlitterFlushContext</h4>

<p>Flushes all draw calls previously issued to <code class="prettyprint">context</code>.  After this call, all subsequent draw calls (on any context) are guaranteed to be processed by the device after all previous draw calls issued on this <code class="prettyprint">context</code>. In many cases you will want to call this before calling SbBlitterFlipSwapChain(), to ensure that all draw calls are submitted before the flip occurs. This function is not thread safe. Returns whether the flush succeeded.</p>

<h4 id="sbblittergetmaxcontexts">SbBlitterGetMaxContexts</h4>

<p>Returns the maximum number of contexts that <code class="prettyprint">device</code> can support in parallel. In many cases, devices support only a single context.  If SbBlitterCreateContext() has been used to create the maximum number of contexts, all subsequent calls to SbBlitterCreateContext() will fail. This function is thread safe. This function returns -1 upon failure.</p>

<h4 id="sbblittergetpixeldatapitchinbytes">SbBlitterGetPixelDataPitchInBytes</h4>

<p>Getter method to return the pitch (in bytes) for <code class="prettyprint">pixel_data</code>.  This indicates the number of bytes per row of pixel data in the image.  -1 is returned in case of an error. This function is not thread safe.</p>

<h4 id="sbblittergetpixeldatapointer">SbBlitterGetPixelDataPointer</h4>

<p>Getter method to return a CPU-accessible pointer to the pixel data represented by <code class="prettyprint">pixel_data</code>.  This pixel data can be modified by the CPU in order to initialize it on the CPU before calling SbBlitterCreateSurfaceFromPixelData().  Note that the pointe returned here is valid as long as <code class="prettyprint">pixel_data</code> is valid, i.e. until either SbBlitterCreateSurfaceFromPixelData() or SbBlitterDestroyPixelData() is called. This function is not thread safe. If there is an error, NULL is returned.</p>

<h4 id="sbblittergetrendertargetfromsurface">SbBlitterGetRenderTargetFromSurface</h4>

<p>Returns the SbBlitterRenderTarget object owned by <code class="prettyprint">surface</code>.  The returned object can be used as a target for draw calls. This function is not thread safe. Returns kSbBlitterInvalidRenderTarget if <code class="prettyprint">surface</code> is not able to provide a render target, or on any other error.</p>

<h4 id="sbblittergetrendertargetfromswapchain">SbBlitterGetRenderTargetFromSwapChain</h4>

<p>Returns the <code class="prettyprint">SbBlitterRenderTarget</code> object that is owned by <code class="prettyprint">swap_chain</code>. The returned object can be used to provide a target to blitter draw calls wishing to draw directly to the display buffer. This function is not thread safe. kSbBlitterInvalidRenderTarget is returned on failure.</p>

<h4 id="sbblittergetsurfaceinfo">SbBlitterGetSurfaceInfo</h4>

<p>Returns a SbBlitterSurfaceInfo structure describing immutable parameters of <code class="prettyprint">surface</code>, such as width, height and pixel format.  The results will be set on the output parameter <code class="prettyprint">surface_info</code> which cannot be NULL. This function is not thread safe. Returns whether the information was retrieved successfully.</p>

<h4 id="sbblitterispixelformatsupportedbydownloadsurfacepixels">SbBlitterIsPixelFormatSupportedByDownloadSurfacePixels</h4>

<p>Returns whether the combination of parameters (<code class="prettyprint">surface</code>, <code class="prettyprint">pixel_format</code>) are valid for calls to SbBlitterDownloadSurfacePixels(). This function is not thread safe.</p>

<h4 id="sbblitterispixelformatsupportedbypixeldata">SbBlitterIsPixelFormatSupportedByPixelData</h4>

<p>Returns whether <code class="prettyprint">device</code> supports calls to SbBlitterCreatePixelData() with <code class="prettyprint">pixel_format</code>. This function is thread safe.</p>

<h4 id="sbblitterissurfaceformatsupportedbyrendertargetsurface">SbBlitterIsSurfaceFormatSupportedByRenderTargetSurface</h4>

<p>Returns whether the <code class="prettyprint">device</code> supports calls to SbBlitterCreateRenderTargetSurface() with <code class="prettyprint">pixel_format</code>. This function is thread safe.</p>

<h4 id="sbblittersetblending">SbBlitterSetBlending</h4>

<p>Sets blending state on the specified <code class="prettyprint">context</code>.  If <code class="prettyprint">blending</code> is true, the source alpha of subsequent draw calls will be used to blend with the destination color.  In particular, Fc = Sc * Sa + Dc * (1 - Sa), where Fc is the final color, Sc is the source color, Sa is the source alpha, and Dc is the destination color.  If <code class="prettyprint">blending</code> is false, the source color and alpha will overwrite the destination color and alpha.  By default blending is disabled on a SbBlitterContext. This function is not thread safe. Returns whether the blending state was succcessfully set.</p>

<h4 id="sbblittersetcolor">SbBlitterSetColor</h4>

<p>Sets the context&#39;s current color.  The current color&#39;s default value is SbBlitterColorFromRGBA(255, 255, 255 255).  The current color affects the fill rectangle&#39;s color in calls to SbBlitterFillRect(), and if SbBlitterSetModulateBlitsWithColor() has been called to enable blit color modulation, the source blit surface pixel color will also be modulated by the color before being output.  The color is specified in unpremultiplied alpha format. This function is not thread safe. Returns whether the color was successfully set.</p>

<h4 id="sbblittersetmodulateblitswithcolor">SbBlitterSetModulateBlitsWithColor</h4>

<p>Sets whether or not blit calls should have their source pixels modulated by the current color (set via a call to SbBlitterSetColor()) before being output.  This can be used to apply opacity to blit calls, as well as for coloring alpha-only surfaces, and other effects. This function is not thread safe. Returns whether the state was successfully set.</p>

<h4 id="sbblittersetrendertarget">SbBlitterSetRenderTarget</h4>

<p>Sets up <code class="prettyprint">render_target</code> as the render target that all subsequent draw calls made on <code class="prettyprint">context</code> will draw to. This function is not thread safe. Returns whether the render target was successfully set.</p>

<h4 id="sbblittersetscissor">SbBlitterSetScissor</h4>

<p>Sets the scissor rectangle.  The scissor rectangle dictates a rectangle of visibility that affects all draw calls.  Only pixels within the scissor rectangle will be rendered, all drawing outside of the scissor rectangle will be clipped.  When SbBlitterSetRenderTarget() is called, the scissor rectangle is automatically set to the extents of the specified render target.  If a scissor rectangle is specified outside of the extents of the current render target bounds, it will be intersected with the render target boudns.  It is an error to call this function before a render target has been specified for the context. This function is not thread safe. Returns whether the scissor was successfully set.</p>

<h2 id="byte_swap-h">byte_swap.h</h2>

<h4 id="sbbyteswaps16">SbByteSwapS16</h4>

<p>Unconditionally swaps the byte order in signed 16-bit <code class="prettyprint">value</code>.</p>

<h4 id="sbbyteswaps32">SbByteSwapS32</h4>

<p>Unconditionally swaps the byte order in signed 32-bit <code class="prettyprint">value</code>.</p>

<h4 id="sbbyteswaps64">SbByteSwapS64</h4>

<p>Unconditionally swaps the byte order in signed 64-bit <code class="prettyprint">value</code>.</p>

<h4 id="sbbyteswapu16">SbByteSwapU16</h4>

<p>Unconditionally swaps the byte order in unsigned 16-bit <code class="prettyprint">value</code>.</p>

<h4 id="sbbyteswapu32">SbByteSwapU32</h4>

<p>Unconditionally swaps the byte order in unsigned 32-bit <code class="prettyprint">value</code>.</p>

<h4 id="sbbyteswapu64">SbByteSwapU64</h4>

<p>Unconditionally swaps the byte order in unsigned 64-bit <code class="prettyprint">value</code>.</p>

<h2 id="character-h">character.h</h2>

<h2 id="condition_variable-h">condition_variable.h</h2>

<h4 id="sbconditionvariablebroadcast">SbConditionVariableBroadcast</h4>

<p>Broadcasts to all current waiters of <code class="prettyprint">condition</code> to stop waiting.</p>

<h4 id="sbconditionvariablecreate">SbConditionVariableCreate</h4>

<p>Creates a new condition variable to work with <code class="prettyprint">opt_mutex</code>, which may be null, placing the newly created condition variable in <code class="prettyprint">out_condition</code>. Returns whether the condition variable could be created. TODO: It looks like WTF does not have the mutex available when creating the condition variable, and pthreads doesn&#39;t appear to require the mutex on condvar creation, so we should just remove the parameter.</p>

<h4 id="sbconditionvariabledestroy">SbConditionVariableDestroy</h4>

<p>Destroys a condition variable, returning whether the destruction was successful. The condition variable specified by <code class="prettyprint">condition</code> is invalidated. Behavior is undefined if other threads are currently waiting on this condition variable.</p>

<h4 id="sbconditionvariablesignal">SbConditionVariableSignal</h4>

<p>Signals the next waiter of <code class="prettyprint">condition</code> to stop waiting.</p>

<h4 id="sbconditionvariablewait">SbConditionVariableWait</h4>

<p>Waits for <code class="prettyprint">condition</code>, releasing the held lock <code class="prettyprint">mutex</code>, blocking indefinitely, and returning the result. Behavior is undefined if <code class="prettyprint">mutex</code> is not held.</p>

<h4 id="sbconditionvariablewaittimed">SbConditionVariableWaitTimed</h4>

<p>Waits for <code class="prettyprint">condition</code>, releasing the held lock <code class="prettyprint">mutex</code>, blocking up to <code class="prettyprint">timeout_duration</code>, and returning the acquisition result. If <code class="prettyprint">timeout_duration</code> is less than or equal to zero, it will return as quickly as possible with a kSbConditionVariableTimedOut result. Behavior is undefined if <code class="prettyprint">mutex</code> is not held.</p>

<h2 id="configuration-h">configuration.h</h2>

<h2 id="directory-h">directory.h</h2>

<h4 id="sbdirectorycanopen">SbDirectoryCanOpen</h4>

<p>Returns whether SbDirectoryOpen is allowed for the given <code class="prettyprint">path</code>.</p>

<h4 id="sbdirectoryclose">SbDirectoryClose</h4>

<p>Closes an open directory stream handle. Returns whether the close was successful.</p>

<h4 id="sbdirectorycreate">SbDirectoryCreate</h4>

<p>Creates the directory <code class="prettyprint">path</code>, assuming the parent directory already exists. Returns whether the directory now exists (even if it existed before).</p>

<h4 id="sbdirectorygetnext">SbDirectoryGetNext</h4>

<p>Populates <code class="prettyprint">out_entry</code> with the next entry in that directory stream, and moves the stream forward by one entry. Returns <code class="prettyprint">true</code> if there was a next directory, and <code class="prettyprint">false</code> at the end of the directory stream.</p>

<h4 id="sbdirectoryopen">SbDirectoryOpen</h4>

<p>Opens the given existing directory for listing. Will return kSbDirectoryInvalidHandle if not successful. If <code class="prettyprint">out_error</code> is provided by the caller, it will be set to the appropriate SbFileError code on failure.</p>

<h2 id="double-h">double.h</h2>

<h4 id="sbdoubleabsolute">SbDoubleAbsolute</h4>

<p>Returns the absolute value of the given double-precision floating-point number <code class="prettyprint">d</code>, preserving NaN and Infinity.</p>

<h4 id="sbdoubleexponent">SbDoubleExponent</h4>

<p>Returns <code class="prettyprint">base</code> taken to the power of <code class="prettyprint">exponent</code>.</p>

<h4 id="sbdoublefloor">SbDoubleFloor</h4>

<p>Floors double-precision floating-point number <code class="prettyprint">d</code> to the nearest integer.</p>

<h4 id="sbdoubleisfinite">SbDoubleIsFinite</h4>

<p>Determines whether double-precision floating-point number <code class="prettyprint">d</code> represents a fininte number.</p>

<h4 id="sbdoubleisnan">SbDoubleIsNan</h4>

<p>Determines whether double-precision floating-point number <code class="prettyprint">d</code> represents &quot;Not a Number.&quot;</p>

<h2 id="drm-h">drm.h</h2>

<h4 id="sbdrmclosesession">SbDrmCloseSession</h4>

<p>Clear any internal states/resources related to the particular <code class="prettyprint">session_id</code>.</p>

<h4 id="sbdrmcreatesystem">SbDrmCreateSystem</h4>

<p>Returns whether the <code class="prettyprint">drm_system</code> is a valid SbDrmSystem. Creates a new <code class="prettyprint">key_system</code> DRM system that can be used when constructing an SbPlayer or an SbDecoder.  <code class="prettyprint">key_system</code> should be in fhe form of &quot;com.example.somesystem&quot; as suggested by <a href="https://w3c.github.io/encrypted-media/#key-system">https://w3c.github.io/encrypted-media/#key-system</a>.  All letters in <code class="prettyprint">key_system</code> should be in lower case and will be matched exactly with known DRM key systems of the platform. <code class="prettyprint">context</code> will be passed when any callback parameters of this function are called. <code class="prettyprint">update_request_callback</code> is a callback that will be called every time after SbDrmGenerateSessionUpdateRequest() is called. <code class="prettyprint">session_updated_callback</code> is a callback that will be called every time after  SbDrmUpdateSession() is called. Please refer to the document of SbDrmGenerateSessionUpdateRequest() and SbDrmUpdateSession() for more details. Returns kSbDrmSystemInvalid if the <code class="prettyprint">key_system</code> is unsupported.</p>

<h4 id="sbdrmdestroysystem">SbDrmDestroySystem</h4>

<p>Destroys <code class="prettyprint">drm_system</code>, which implicitly removes all keys installed in it, and invalidates all outstanding session update requests. A DRM system cannot be destroyed unless any associated SbPlayer or SbDecoder has first been destroyed.  All callbacks are guaranteed to be finished when this function returns.  So calling this function from a callback passed to SbDrmCreateSystem() will result in deadlock.</p>

<h4 id="sbdrmgeneratesessionupdaterequest">SbDrmGenerateSessionUpdateRequest</h4>

<p>Asynchronously generates a session update request payload for <code class="prettyprint">initialization_data</code>, of <code class="prettyprint">initialization_data_size</code>, in case sensitive <code class="prettyprint">type</code>, extracted from the media stream, in <code class="prettyprint">drm_system</code>&#39;s key system. Calls <code class="prettyprint">update_request_callback</code> with <code class="prettyprint">context</code> and either a populated request, or NULL <code class="prettyprint">session_id</code> if an error occured.  <code class="prettyprint">context</code> may be used to distinguish callbacks from multiple concurrent calls to SbDrmGenerateSessionUpdateRequest(), and/or to route callbacks back to an object instance.  Callbacks may called from another thread or from the current thread before this function returns.</p>

<h4 id="sbdrmgetkeycount">SbDrmGetKeyCount</h4>

<p>Gets the number of keys installed in the given <code class="prettyprint">drm_system</code> system.</p>

<h4 id="sbdrmgetkeystatus">SbDrmGetKeyStatus</h4>

<p>Gets the <code class="prettyprint">out_key</code>, <code class="prettyprint">out_key_size</code>, and <code class="prettyprint">out_status</code> for key with <code class="prettyprint">index</code> in the given <code class="prettyprint">drm_system</code> system. Returns whether a key is installed at <code class="prettyprint">index</code>. If not, the output parameters, which all must not be NULL, will not be modified.</p>

<h4 id="sbdrmremoveallkeys">SbDrmRemoveAllKeys</h4>

<p>Removes all installed keys for <code class="prettyprint">drm_system</code>. Any outstanding session update requests will also be invalidated.</p>

<h4 id="sbdrmupdatesession">SbDrmUpdateSession</h4>

<p>Update session with <code class="prettyprint">key</code>, in <code class="prettyprint">drm_system</code>&#39;s key system, from the license server response. <code class="prettyprint">request</code> must be the corresponding returned request from SbDrmGenerateSessionUpdateRequest(). Calls <code class="prettyprint">session_updated_callback</code> with <code class="prettyprint">context</code> and whether the update succeeded. <code class="prettyprint">context</code> may be used to distinguish callbacks from multiple concurrent calls to SbDrmUpdateSession(), and/or to route callbacks back to an object instance.  Once the session is successfully updated, an SbPlayer or SbDecoder associated with that system will be able to decrypt samples encrypted.  <code class="prettyprint">session_updated_callback</code> may called from another thread or from the current thread before this function returns.</p>

<h2 id="event-h">event.h</h2>

<h4 id="sbeventcancel">SbEventCancel</h4>

<p>Cancels the injected <code class="prettyprint">event_id</code>. Does nothing if the event already fired. Can be safely called from any thread, but there is no guarantee that the event will not run anyway unless it is called from the main Starboard event loop thread.</p>

<h4 id="sbeventschedule">SbEventSchedule</h4>

<p>Schedules an event <code class="prettyprint">callback</code> into the main Starboard event loop, with accompanying <code class="prettyprint">context</code>. This function may be called from any thread, but <code class="prettyprint">callback</code> will always be called from the main Starboard thread, queued with other pending events. <code class="prettyprint">callback</code> will not be called any earlier than <code class="prettyprint">delay</code> microseconds from the time SbEventInject is called. Set <code class="prettyprint">delay</code> to 0 to call the event as soon as possible.</p>

<h2 id="export-h">export.h</h2>

<h2 id="file-h">file.h</h2>

<h4 id="sbfilecanopen">SbFileCanOpen</h4>

<p>Returns whether SbFileOpen() with the given <code class="prettyprint">flags</code> is allowed for <code class="prettyprint">path</code>, which must be absolute.</p>

<h4 id="sbfileclose">SbFileClose</h4>

<p>Closes <code class="prettyprint">file</code>. Returns whether the close was successful.</p>

<h4 id="sbfiledelete">SbFileDelete</h4>

<p>Deletes the regular file, symlink, or empty directory at <code class="prettyprint">path</code>, which must be absolute. Used mainly to clean up after unit tests. May fail on some platforms if the file in question is being held open.</p>

<h4 id="sbfileexists">SbFileExists</h4>

<p>Returns whether a file or directory exists at <code class="prettyprint">path</code>, which must be absolute.</p>

<h4 id="sbfileflush">SbFileFlush</h4>

<p>Flushes the write buffer to <code class="prettyprint">file</code>. Data written via SbFileWrite isn&#39;t necessarily comitted right away until the file is flushed or closed.</p>

<h4 id="sbfilegetinfo">SbFileGetInfo</h4>

<p>Places some information about <code class="prettyprint">file</code>, an open SbFile, in <code class="prettyprint">out_info</code>. Returns <code class="prettyprint">true</code> if successful. If unsuccessful, <code class="prettyprint">out_info</code> is untouched.</p>

<h4 id="sbfilegetpathinfo">SbFileGetPathInfo</h4>

<p>Places information about the file or directory at <code class="prettyprint">path</code>, which must be absolute, into <code class="prettyprint">out_info</code>. Returns <code class="prettyprint">true</code> if successful. If unsuccessful, <code class="prettyprint">out_info</code> is untouched.</p>

<h4 id="sbfilemodestringtoflags">SbFileModeStringToFlags</h4>

<p>Converts an ISO fopen() mode string into flags that can be equivalently passed into SbFileOpen().</p>

<h4 id="sbfileopen">SbFileOpen</h4>

<p>Opens the file at <code class="prettyprint">path</code>, which must be absolute, creating it if specified by <code class="prettyprint">flags</code>. <code class="prettyprint">out_created</code>, if provided, will be set to true if a new file was created (or an old one truncated to zero length to simulate a new file, which can happen with kSbFileCreateAlways), and false otherwise.  <code class="prettyprint">out_error</code> can be NULL. If creation failed, it will return kSbFileInvalid. The read/write position is at the beginning of the file.</p>

<h4 id="sbfileread">SbFileRead</h4>

<p>Reads <code class="prettyprint">size</code> bytes (or until EOF is reached) from <code class="prettyprint">file</code> into <code class="prettyprint">data</code>, starting at the file&#39;s current position. Returns the number of bytes read, or -1 on error. Note that this function does NOT make a best effort to read all data on all platforms, it just reads however many bytes are quickly available. Can be run in a loop to make it a best-effort read.</p>

<h4 id="sbfileseek">SbFileSeek</h4>

<p>Changes current read/write position in <code class="prettyprint">file</code> to <code class="prettyprint">offset</code> relative to the origin defined by <code class="prettyprint">whence</code>. Returns the resultant current read/write position in the file (relative to the start) or -1 in case of error. May not support seeking past the end of the file on some platforms.</p>

<h4 id="sbfiletruncate">SbFileTruncate</h4>

<p>Truncates the given <code class="prettyprint">file</code> to the given <code class="prettyprint">length</code>. If length is greater than the current size of the file, the file is extended with zeros. Negative <code class="prettyprint">length</code> will do nothing and return false.</p>

<h4 id="sbfilewrite">SbFileWrite</h4>

<p>Writes the given buffer into <code class="prettyprint">file</code> at the file&#39;s current position, overwritting any data that was previously there. Returns the number of bytes written, or -1 on error. Note that this function does NOT make a best effort to write all data, it writes however many bytes can be written quickly. It should be run in a loop to ensure all data is written.</p>

<h2 id="input-h">input.h</h2>

<h2 id="key-h">key.h</h2>

<h2 id="log-h">log.h</h2>

<h4 id="break">Break</h4>

<h4 id="getminloglevel">GetMinLogLevel</h4>

<h4 id="logmessage">LogMessage</h4>

<h4 id="sblog">SbLog</h4>

<p>Writes <code class="prettyprint">message</code> at <code class="prettyprint">priority</code> to the debug output log for this platform. Passing kSbLogPriorityFatal will not terminate the program, such policy must be enforced at the application level. <code class="prettyprint">priority</code> may, in fact, be completely ignored on many platforms. No formatting is required to be done on the message, not even newline termination. That said, platforms may wish to adjust the message to be more suitable for their output method. This could be wrapping the text, or stripping unprintable characters.</p>

<h4 id="sblogflush">SbLogFlush</h4>

<p>Inline wrapper of SbLogFormat to convert from ellipsis to va_args. Flushes the log buffer, on some platforms.</p>

<h4 id="sblogformat">SbLogFormat</h4>

<p>Inline wrapper of SbLogFormat to convert from ellipsis to va_args. A log output method, that additionally performs a string format on the way out.</p>

<h4 id="sblogistty">SbLogIsTty</h4>

<p>Returns whether the log output goes to a TTY or is being redirected.</p>

<h4 id="sblograw">SbLogRaw</h4>

<p>A bare-bones log output method that is async-signal-safe, i.e. safe to call from an asynchronous signal handler (e.g. a SIGSEGV handler). It should do no additional formatting.</p>

<h4 id="sblograwdumpstack">SbLogRawDumpStack</h4>

<p>Dumps the stack of the current thread to the log in an async-signal-safe manner, i.e. safe to call from an asynchronous signal handler (e.g. a SIGSEGV handler). Does not include SbLogRawDumpStack itself, and will additionally skip <code class="prettyprint">frames_to_skip</code> frames from the top of the stack.</p>

<h4 id="sblograwformat">SbLogRawFormat</h4>

<p>A formatted log output method that is async-signal-safe, i.e. safe to call from an asynchronous signal handler (e.g. a SIGSEGV handler).</p>

<h4 id="setminloglevel">SetMinLogLevel</h4>

<p>If we are a C++ program, then we provide a selected subset of base/logging macros and assertions. See that file for more comments.</p>

<h4 id="operator">operator</h4>

<h2 id="media-h">media.h</h2>

<h4 id="sbmediagetaudioconfiguration">SbMediaGetAudioConfiguration</h4>

<p>Places the current physical audio configuration of audio output <code class="prettyprint">output_index</code> on this device into <code class="prettyprint">out_configuration</code>, which must not be NULL, or returns false if nothing could be determined on this platform, or if <code class="prettyprint">output_index</code> doesn&#39;t exist on this device.</p>

<h4 id="sbmediagetaudiooutputcount">SbMediaGetAudioOutputCount</h4>

<p>Returns the number of audio outputs currently available on this device.  It is expected that, even if the number of outputs or their audio configurations can&#39;t be determined, the platform will at least return a single output that supports at least stereo.</p>

<h4 id="sbmediaisaudiosupported">SbMediaIsAudioSupported</h4>

<p>Returns whether <code class="prettyprint">audio_codec</code> is supported on this platform at <code class="prettyprint">bitrate</code>. If <code class="prettyprint">audio_codec</code> is not supported under any condition, this function will always return false.</p>

<h4 id="sbmediaisoutputprotected">SbMediaIsOutputProtected</h4>

<p>Returns whether output copy protection is currently enabled on all capable outputs. If true, then non-protection-capable outputs are expected to be blanked.</p>

<h4 id="sbmediaissupported">SbMediaIsSupported</h4>

<p>Returns whether decoding <code class="prettyprint">video_codec</code>, <code class="prettyprint">audio_codec</code>, and decrypting using <code class="prettyprint">key_system</code> is supported together by this platform.  If <code class="prettyprint">video_codec</code> is kSbMediaVideoCodecNone or <code class="prettyprint">audio_codec</code> is kSbMediaAudioCodecNone, this function should return true if <code class="prettyprint">key_system</code> is supported on the platform to decode any supported input formats.</p>

<h4 id="sbmediaisvideosupported">SbMediaIsVideoSupported</h4>

<p>Returns whether a given combination of <code class="prettyprint">frame_width</code> x <code class="prettyprint">frame_height</code> frames at <code class="prettyprint">bitrate</code> and <code class="prettyprint">fps</code> is supported on this platform with <code class="prettyprint">video_codec</code>. If <code class="prettyprint">video_codec</code> is not supported under any condition, this function will always return false.  Any of the parameters may be set to 0 to mean that they shouldn&#39;t be considered.</p>

<h4 id="sbmediasetoutputprotection">SbMediaSetOutputProtection</h4>

<p>Enables or disables output copy protection on all capable outputs. If enabled, then non-protection-capable outputs are expected to be blanked. Returns whether the operation was successful. Returns a success even if the call was redundant.</p>

<h2 id="memory-h">memory.h</h2>

<h4 id="sbmemoryallocatealignedunchecked">SbMemoryAllocateAlignedUnchecked</h4>

<p>Allocates a chunk of memory of at least <code class="prettyprint">size</code> bytes, aligned to <code class="prettyprint">alignment</code>, returning it. <code class="prettyprint">alignment</code> must be a power of two, otherwise behavior is undefined. If unable to allocate the memory, it returns NULL. If <code class="prettyprint">size</code> is 0, it may return NULL or it may return a unique aligned pointer value that can be passed to SbMemoryFreeAligned. Meant to be a drop-in replacement for memalign.</p>

<h4 id="sbmemoryallocateunchecked">SbMemoryAllocateUnchecked</h4>

<p>Allocates a chunk of memory of at least <code class="prettyprint">size</code> bytes, returning it. If unable to allocate the memory, it returns NULL. If <code class="prettyprint">size</code> is 0, it may return NULL or it may return a unique pointer value that can be passed to SbMemoryFree. Meant to be a drop-in replacement for malloc.</p>

<h4 id="sbmemorycompare">SbMemoryCompare</h4>

<p>Compares the contents of the first <code class="prettyprint">count</code> bytes of <code class="prettyprint">buffer1</code> and <code class="prettyprint">buffer2</code>. returns -1 if <code class="prettyprint">buffer1</code> is &quot;less-than&quot; <code class="prettyprint">buffer2</code>, 0 if they are equal, or 1 if <code class="prettyprint">buffer1</code> is &quot;greater-than&quot; <code class="prettyprint">buffer2</code>.  Meant to be a drop-in replacement for memcmp.</p>

<h4 id="sbmemorycopy">SbMemoryCopy</h4>

<p>Copies <code class="prettyprint">count</code> sequential bytes from <code class="prettyprint">source</code> to <code class="prettyprint">destination</code>, without support for the <code class="prettyprint">source</code> and <code class="prettyprint">destination</code> regions overlapping.  Behavior is undefined if <code class="prettyprint">destination</code> or <code class="prettyprint">source</code> are NULL. Does nothing if <code class="prettyprint">count</code> is 0. Returns <code class="prettyprint">destination</code>, for some reason. Meant to be a drop-in replacement for memcpy.</p>

<h4 id="sbmemoryfree">SbMemoryFree</h4>

<p>Same as SbMemoryReallocateUnchecked, but will abort() in the case of an allocation failure Frees a previously allocated chunk of memory. If <code class="prettyprint">memory</code> is NULL, then it does nothing.  Meant to be a drop-in replacement for free.</p>

<h4 id="sbmemoryfreealigned">SbMemoryFreeAligned</h4>

<p>Same as SbMemoryAllocateAlignedUnchecked, but will abort() in the case of an allocation failure Frees a previously allocated chunk of aligned memory. If <code class="prettyprint">memory</code> is NULL, then it does nothing.  Meant to be a drop-in replacement for <em>aligned</em>free.</p>

<h4 id="sbmemorygetstackbounds">SbMemoryGetStackBounds</h4>

<p>Gets the stack bounds for the current thread, placing the highest addressable byte + 1 in <code class="prettyprint">out_high</code>, and the lowest addressable byte in <code class="prettyprint">out_low</code>.</p>

<h4 id="sbmemorymap">SbMemoryMap</h4>

<p>Allocates <code class="prettyprint">size_bytes</code> worth of physical memory pages and maps them into an available virtual region. <code class="prettyprint">flags</code> is the bitwise or of the protection flags for the mapped memory as specified in SbMemoryMapFlags. On some platforms, <code class="prettyprint">name</code> appears in the debugger and can be up to 32 bytes. Returns SB_MEMORY_MAP_FAILED on failure, as NULL is a valid return value.</p>

<h4 id="sbmemorymove">SbMemoryMove</h4>

<p>Copies <code class="prettyprint">count</code> sequential bytes from <code class="prettyprint">source</code> to <code class="prettyprint">destination</code>, with support for the <code class="prettyprint">source</code> and <code class="prettyprint">destination</code> regions overlapping.  Behavior is undefined if <code class="prettyprint">destination</code> or <code class="prettyprint">source</code> are NULL. Does nothing if <code class="prettyprint">count</code> is 0. Returns <code class="prettyprint">destination</code>, for some reason. Meant to be a drop-in replacement for memmove.</p>

<h4 id="sbmemoryreallocateunchecked">SbMemoryReallocateUnchecked</h4>

<p>Same as SbMemoryAllocateUnchecked, but will abort() in the case of an allocation failure. Attempts to resize <code class="prettyprint">memory</code> to be at least <code class="prettyprint">size</code> bytes, without touching the contents. If it cannot perform the fast resize, it will allocate a new chunk of memory, copy the contents over, and free the previous chunk, returning a pointer to the new chunk. If it cannot perform the slow resize, it will return NULL, leaving the given memory chunk unchanged. <code class="prettyprint">memory</code> may be NULL, in which case it behaves exactly like SbMemoryAllocateUnchecked.  If <code class="prettyprint">size</code> is 0, it may return NULL or it may return a unique pointer value that can be passed to SbMemoryFree. Meant to be a drop-in replacement for realloc.</p>

<h4 id="sbmemoryset">SbMemorySet</h4>

<p>Fills <code class="prettyprint">count</code> sequential bytes starting at <code class="prettyprint">destination</code>, with the unsigned char coercion of <code class="prettyprint">byte_value</code>. Behavior is undefined if <code class="prettyprint">destination</code> is NULL. Returns <code class="prettyprint">destination</code>, for some reason. Does nothing if <code class="prettyprint">count</code> is 0. Meant to be a drop-in replacement for memset.</p>

<h4 id="sbmemoryunmap">SbMemoryUnmap</h4>

<p>Unmap <code class="prettyprint">size_bytes</code> of physical pages starting from <code class="prettyprint">virtual_address</code>, returning true on success. After this, [virtual_address, virtual_address + size_bytes) will not be read/writable. SbMemoryUnmap() can unmap multiple contiguous regions that were mapped with separate calls to SbMemoryMap(). E.g. if one call to SbMemoryMap(0x1000) returns (void*)0xA000 and another call to SbMemoryMap(0x1000) returns (void*)0xB000, SbMemoryUnmap(0xA000, 0x2000) should free both.</p>

<h4 id="void">void</h4>

<p>Finds the lower 8-bits of <code class="prettyprint">value</code> in the first <code class="prettyprint">count</code> bytes of <code class="prettyprint">buffer</code>, returning a pointer to the first found occurrence, or NULL if not found. Meant to be a drop-in replacement for memchr.</p>

<h2 id="mutex-h">mutex.h</h2>

<h4 id="sbmutexacquire">SbMutexAcquire</h4>

<p>Acquires <code class="prettyprint">mutex</code>, blocking indefinitely, returning the acquisition result. SbMutexes are not reentrant, so a recursive acquisition will block forever.</p>

<h4 id="sbmutexacquiretry">SbMutexAcquireTry</h4>

<p>Acquires <code class="prettyprint">mutex</code>, without blocking, returning the acquisition result. SbMutexes are not reentrant, so a recursive acquisition will always fail.</p>

<h4 id="sbmutexcreate">SbMutexCreate</h4>

<p>Creates a new mutex, placing the handle to the newly created mutex in <code class="prettyprint">out_mutex</code>. Returns whether able to create a new mutex.</p>

<h4 id="sbmutexdestroy">SbMutexDestroy</h4>

<p>Destroys a mutex, returning whether the destruction was successful. The mutex specified by <code class="prettyprint">mutex</code> is invalidated.</p>

<h4 id="sbmutexrelease">SbMutexRelease</h4>

<p>Releases <code class="prettyprint">mutex</code> held by the current thread, returning whether the release was successful. Releases should always be successful if the mutex is held by the current thread.</p>

<h2 id="once-h">once.h</h2>

<h4 id="sbonce">SbOnce</h4>

<p>If SbOnce() was never called before on with <code class="prettyprint">once_control</code>, this function will run <code class="prettyprint">init_routine</code> in a thread-safe way and then returns true.  If SbOnce() was called before, the function returns (true) immediately. If <code class="prettyprint">once_control</code> or <code class="prettyprint">init_routine</code> are invalid, the function returns false.</p>

<h2 id="player-h">player.h</h2>

<h4 id="sbplayercreate">SbPlayerCreate</h4>

<p>Creates a player for the specified <code class="prettyprint">video_codec</code> and <code class="prettyprint">audio_codec</code>, acquiring all resources needed to operate it, and returning an opaque handle to it. If <code class="prettyprint">video_codec</code> is kSbMediaVideoCodecNone, the player is an audio-only player. Otherwise, the player is an audio/video decoder. <code class="prettyprint">audio_codec</code> should never be kSbMediaAudioCodecNone. The expectation is that a new player will be created and destroyed for every playback.  <code class="prettyprint">duration_pts</code> is the expected media duration in 90KHz ticks (PTS). It may be set to SB_PLAYER_NO_DURATION for live streams.  If the media stream has encrypted portions, then an appropriate DRM system must first be created with SbDrmCreateSystem() and passed into <code class="prettyprint">drm_system</code>. If not, then <code class="prettyprint">drm_system</code> may be kSbDrmSystemInvalid.  If <code class="prettyprint">audio_codec</code> is kSbMediaAudioCodecAac, then the caller must provide a populated <code class="prettyprint">audio_header</code>. Otherwise, this may be NULL.  If not NULL, the player will call <code class="prettyprint">sample_deallocator_func</code> on an internal thread to free the sample buffers passed into SbPlayerWriteSample().  If not NULL, the decoder will call <code class="prettyprint">decoder_status_func</code> on an internal thread to provide an update on the decoder&#39;s status. No work should be done on this thread, it should just signal the client thread interacting with the decoder.  If not NULL, the player will call <code class="prettyprint">player_status_func</code> on an internal thread to provide an update on the playback status. No work should be done on this thread, it should just signal the client thread interacting with the decoder.  <code class="prettyprint">context</code> will be passed back into all callbacks, and is generally used to point at a class or struct that contains state associated with the player.  The associated decoder of the returned player should be assumed to be in kSbPlayerDecoderStateBufferFull until SbPlayerSeek() has been called on it.  It is expected that the thread that calls SbPlayerCreate is the same thread that calls the other SbPlayer functions for that player, or that there is a mutex guarding calls into each SbPlayer instance.  If there is a platform limitation on how many players can coexist simultaneously, then calls made to this function that attempt to exceed that limit will return kSbPlayerInvalid.</p>

<h4 id="sbplayerdestroy">SbPlayerDestroy</h4>

<p>Destroys <code class="prettyprint">player</code>, freeing all associated resources. Each callback must receive one more callback to say that the player was destroyed.  Callbacks may be in-flight when SbPlayerDestroy is called, and should be ignored once this function is called.  It is not allowed to pass <code class="prettyprint">player</code> into any other SbPlayer function once SbPlayerDestroy has been called on it.</p>

<h4 id="sbplayergetcompositionhandle">SbPlayerGetCompositionHandle</h4>

<p>Gets a handle that represents the player&#39;s video output, for the purpose of composing with SbCompositor (currently undefined).</p>

<h4 id="sbplayergetinfo">SbPlayerGetInfo</h4>

<p>Gets a snapshot of the current player state and writes it into <code class="prettyprint">out_player_info</code>. This function is expected to be inexpensive, and may be called very frequently.</p>

<h4 id="sbplayergettextureid">SbPlayerGetTextureId</h4>

<p>Gets an OpenGL texture ID that points to the player&#39;s video output frame at the time it was called. This can be called once, and the same texture ID will be appropriately mapped to the current video frame when drawn.</p>

<h4 id="sbplayerseek">SbPlayerSeek</h4>

<p>Tells the player to freeze playback where it is (if it has already started), reset/flush the decoder pipeline, and go back to the Prerolling state. The player should restart playback once it can display the frame at <code class="prettyprint">seek_to_pts</code>, or the closest it can get (some players can only seek to I-Frames, for example). The client should send no more audio or video samples until SbPlayerDecoderStatusFunc is called back with kSbPlayerDecoderStateNeedsData, for each required media type.  A call to seek may interrupt another seek.  <code class="prettyprint">ticket</code> is a user-supplied unique ID that will be passed to all subsequent SbPlayerDecoderStatusFunc calls. This is used to filter calls that may have been in flight when SbPlayerSeek is called. To be very specific, once SbPlayerSeek has been called with ticket X, a client should ignore all SbPlayerDecoderStatusFunc calls that don&#39;t pass in ticket X.  Seek must also be called before samples are sent when starting playback for the first time, or the client will never receive the kSbPlayerDecoderStateNeedsData signal.</p>

<h4 id="sbplayersetbounds">SbPlayerSetBounds</h4>

<p>Sets the player bounds to the given graphics plane coordinates. Will not take effect until the next graphics frame buffer swap. The default bounds for a player are the full screen.</p>

<h4 id="sbplayersetpause">SbPlayerSetPause</h4>

<p>Sets the pause status for <code class="prettyprint">player</code>. If <code class="prettyprint">player</code> is in kPlayerStatePrerolling, this will set the initial pause state for the current seek target.</p>

<h4 id="sbplayersetvolume">SbPlayerSetVolume</h4>

<p>Sets the volume for <code class="prettyprint">player</code>, in [0.0, 1.0]. 0.0 means the audio should be muted, and 1.0 means it should be played at full volume.</p>

<h4 id="sbplayerwriteendofstream">SbPlayerWriteEndOfStream</h4>

<p>Writes a marker to <code class="prettyprint">player</code>&#39;s input stream of <code class="prettyprint">stream_type</code> that there are no more samples for that media type for the remainder of this media stream. This marker is invalidated, along with the rest of the contents of the stream, after a call to SbPlayerSeek.</p>

<h4 id="sbplayerwritesample">SbPlayerWriteSample</h4>

<p>Writes a sample of the given media type to <code class="prettyprint">player</code>&#39;s input stream. <code class="prettyprint">sample_type</code> is the type of sample, audio or video. <code class="prettyprint">sample_buffer</code> is a pointer to a buffer with the data for this sample. This buffer is expected to be a portion of a H.264 bytestream, containing a sequence of whole NAL Units for video, or a complete audio frame. <code class="prettyprint">sample_buffer_size</code> is the number of bytes in the given sample. <code class="prettyprint">sample_pts</code> is the timestamp of the sample in 90KHz ticks (PTS), and samples MAY be written &quot;slightly&quot; out-of-order. <code class="prettyprint">video_sample_info</code> must be provided for every call where <code class="prettyprint">sample_type</code> is kSbMediaTypeVideo, and must be NULL otherwise.  <code class="prettyprint">sample_drm_info</code> must be provided for encrypted samples, and must be NULL otherwise.  The lifetime of <code class="prettyprint">video_sample_info</code> and <code class="prettyprint">sample_drm_info</code> are not guaranteed past the call to SbPlayerWriteSample, so the implementation must copy any information it wants to retain from those structures synchronously, before it returns.</p>

<h2 id="queue-h">queue.h</h2>

<h2 id="socket-h">socket.h</h2>

<h4 id="sbsocketaccept">SbSocketAccept</h4>

<p>Accepts a pending connection on <code class="prettyprint">socket</code>, returning a new SbSocket representing that connection. Sets the error on <code class="prettyprint">socket</code> and returns kSbSocketInvalid if unable to accept a new connection.</p>

<h4 id="sbsocketbind">SbSocketBind</h4>

<p>Binds <code class="prettyprint">socket</code> to a specific local interface and port specified by <code class="prettyprint">local_address</code>, which must not be NULL. Port 0 means choose a port for me and IP address 0.0.0.0 means bind to all interfaces. Sets and returns the socket error if unable to bind to <code class="prettyprint">local_address</code>.</p>

<h4 id="sbsocketclearlasterror">SbSocketClearLastError</h4>

<p>Clears the last error set on <code class="prettyprint">socket</code>. Returns whether the socket error was cleared.</p>

<h4 id="sbsocketconnect">SbSocketConnect</h4>

<p>Opens a connection of <code class="prettyprint">socket</code>&#39;s type to the host and port specified by <code class="prettyprint">address</code>. Sets and returns the socket error if unable to bind to <code class="prettyprint">local_address</code>.</p>

<h4 id="sbsocketcreate">SbSocketCreate</h4>

<p>Creates a new non-blocking socket for protocol <code class="prettyprint">protocol</code> using address family <code class="prettyprint">address_type</code>. Returns the newly created handle, if successful, or kSbSocketInvalid, if not. If unsuccessful, sets the last system error appropriately.</p>

<h4 id="sbsocketdestroy">SbSocketDestroy</h4>

<p>Destroys <code class="prettyprint">socket</code>. Flushes the socket, closes any connection that may be active on <code class="prettyprint">socket</code>, and reclaims any resources associated with <code class="prettyprint">socket</code>, including any registration with an SbSocketWaiter. Returns whether the destruction was successful. Even if this function returns false, you shouldn&#39;t be able to use the socket anymore.</p>

<h4 id="sbsocketfreeresolution">SbSocketFreeResolution</h4>

<p>Frees a resolution allocated by SbSocketResolve.</p>

<h4 id="sbsocketgetlasterror">SbSocketGetLastError</h4>

<p>Returns the last error set on <code class="prettyprint">socket</code>. If <code class="prettyprint">socket</code> is not valid, always returns kSbSocketErrorFailed.</p>

<h4 id="sbsocketgetlocaladdress">SbSocketGetLocalAddress</h4>

<p>Gets the address that this socket is bound to locally, if the socket is connected. Returns whether getting the address was successful.</p>

<h4 id="sbsocketgetlocalinterfaceaddress">SbSocketGetLocalInterfaceAddress</h4>

<p>Gets the address of the local IPv4 network interface. Does not include loopback (or IPv6) addresses.</p>

<h4 id="sbsocketisconnected">SbSocketIsConnected</h4>

<p>Returns whether <code class="prettyprint">socket</code> is connected to anything. Invalid sockets are not connected.</p>

<h4 id="sbsocketisconnectedandidle">SbSocketIsConnectedAndIdle</h4>

<p>Returns whether <code class="prettyprint">socket</code> is connected to anything, and whether it is receiving any data.</p>

<h4 id="sbsocketjoinmulticastgroup">SbSocketJoinMulticastGroup</h4>

<p>Joins <code class="prettyprint">socket</code> to an IP multicast group identified by <code class="prettyprint">address</code>. The equivalent of IP_ADD_MEMBERSHIP.</p>

<h4 id="sbsocketlisten">SbSocketListen</h4>

<p>Causes <code class="prettyprint">socket</code> to listen on <code class="prettyprint">local_address</code>. Sets and returns the socket error if unable to listen for some reason.</p>

<h4 id="sbsocketreceivefrom">SbSocketReceiveFrom</h4>

<p>Reads up to <code class="prettyprint">data_size</code> bytes from <code class="prettyprint">socket</code> into <code class="prettyprint">out_data</code>. Also places the source address of the packet in <code class="prettyprint">out_source</code>, if out_source is not NULL. Returns the number of bytes read, or a negative number on error. SbSocketGetLastError can provide the precise error encountered.  Note that this function is NOT specified to (but MAY) make a best effort to read all data on all platforms, it just reads however many bytes are available conveniently. Can be run in a loop until pending to make it a best-effort read (but still only up to not blocking, unless you want to spin).  The primary use of <code class="prettyprint">out_source</code> is for receiving datagram packets from multiple sources on a UDP server socket. TCP has two endpoints connected persistently, so the address is unnecessary, but allowed.</p>

<h4 id="sbsocketresolve">SbSocketResolve</h4>

<p>Synchronously resolves <code class="prettyprint">hostname</code> into an SbSocketResolution, filtered by <code class="prettyprint">filters</code>, which is a mask of SbSocketResolveFilter values. If no IP address family filter is specified in <code class="prettyprint">filters</code>, all address families will be included, but if one is specified, only that address familiy will be included. Unrecognized filter bits are ignored. Returns NULL if unable to resolve <code class="prettyprint">hostname</code>. The returned SbSocketResolution must be freed with SbSocketFreeResolution.</p>

<h4 id="sbsocketsendto">SbSocketSendTo</h4>

<p>Writes up to <code class="prettyprint">data_size</code> bytes of <code class="prettyprint">data</code> to <code class="prettyprint">destination</code> via <code class="prettyprint">socket</code>. Returns the number of bytes written, or a negative number on error. SbSocketGetLastError can provide the precise error encountered. <code class="prettyprint">destination</code> must be NULL for TCP connections, which can only have a single endpoint.  Note that this function is NOT specified to (but MAY) make a best effort to write all data on all platforms, it just writes however many bytes that are conveniently. Can be run in a loop until pending to make it a best-effort write (but still only up to not blocking, unless you want to spin).  The primary use of <code class="prettyprint">destination</code> is to send datagram packets, which can go out to multiple sources from a single UDP server socket. TCP has two endpoints connected persistently, so <code class="prettyprint">destination</code> cannot be set when sending to a TCP socket -- it will cause an error.</p>

<h4 id="sbsocketsetbroadcast">SbSocketSetBroadcast</h4>

<p>Sets the SO_BROADCAST, or equivalent, option to <code class="prettyprint">value</code> on <code class="prettyprint">socket</code>. Returns whether the option was actually set.  This option is only meaningful for UDP sockets, and will allow the socket to send to the broadcast address.</p>

<h4 id="sbsocketsetreceivebuffersize">SbSocketSetReceiveBufferSize</h4>

<p>Sets SO_RCVBUF, or equivalent, option to <code class="prettyprint">size</code> on <code class="prettyprint">socket</code>.</p>

<h4 id="sbsocketsetreuseaddress">SbSocketSetReuseAddress</h4>

<p>Sets the SO_REUSEADDR, or equivalent, option to <code class="prettyprint">value</code> on <code class="prettyprint">socket</code>. Returns whether the option was actually set.  This option allows a bound address to be reused if a socket isn&#39;t actively bound to it.</p>

<h4 id="sbsocketsetsendbuffersize">SbSocketSetSendBufferSize</h4>

<p>Sets SO_SNDBUF, or equivalent, option to <code class="prettyprint">size</code> on <code class="prettyprint">socket</code>.</p>

<h4 id="sbsocketsettcpkeepalive">SbSocketSetTcpKeepAlive</h4>

<p>Sets the SO_KEEPALIVE, or equivalent, option to <code class="prettyprint">value</code> on <code class="prettyprint">socket</code>. If <code class="prettyprint">value</code> is true, then <code class="prettyprint">period</code> specifies the minimum time (SbTime is always in microseconds) between keep-alive packets, otherwise <code class="prettyprint">period</code> is ignored. Returns whether the option was actually set.</p>

<h4 id="sbsocketsettcpnodelay">SbSocketSetTcpNoDelay</h4>

<p>Sets the TCP_NODELAY, or equivalent, option to <code class="prettyprint">value</code> on <code class="prettyprint">socket</code>.  Returns whether the option was actually set.  This disables the Nagle algorithm for reducing the number of packets sent when converting from a stream to packets. Disabling Nagle will generally put the data for each Send call into its own packet, but does not guarantee that behavior.</p>

<h4 id="sbsocketsettcpwindowscaling">SbSocketSetTcpWindowScaling</h4>

<p>Sets SO_WINSCALE, or equivalent, option to <code class="prettyprint">value</code> on <code class="prettyprint">socket</code>.</p>

<h2 id="socket_waiter-h">socket_waiter.h</h2>

<h4 id="sbsocketwaiteradd">SbSocketWaiterAdd</h4>

<p>Adds a new socket to be waited on by the <code class="prettyprint">waiter</code> with a bitfield of <code class="prettyprint">interests</code>. When the event fires, <code class="prettyprint">callback</code> will be called with <code class="prettyprint">waiter</code>, <code class="prettyprint">socket</code>, and <code class="prettyprint">context</code>, as well as a bitfield of which interests the socket is actually ready for. This should only be called on the thread that waits on this waiter.  If <code class="prettyprint">socket</code> is already registered with this or another waiter, the function will do nothing and return false. The client must remove the socket and then add it back with the new <code class="prettyprint">interests</code>.  If <code class="prettyprint">socket</code> is already ready for one or more operations set in the <code class="prettyprint">interests</code> mask, then the callback will be called on the next call to SbSocketWaiterWait() or SbSocketWaiterWaitTimed().  If <code class="prettyprint">persistent</code> is true, then <code class="prettyprint">socket</code> will stay registered with <code class="prettyprint">waiter</code> until SbSocketWaiterRemove() is called with <code class="prettyprint">waiter</code> and <code class="prettyprint">socket</code>. Otherwise, <code class="prettyprint">socket</code> will be removed after the next call to <code class="prettyprint">callback</code>, even if not all registered <code class="prettyprint">interests</code> became ready.</p>

<h4 id="sbsocketwaitercreate">SbSocketWaiterCreate</h4>

<p>Creates a new socket waiter for the current thread. A socket waiter should have a 1-1 relationship to a thread that wants to wait for socket activity. There is no reason to create multiple waiters for a single thread, because the thread can only block on one waiter at a time. The results of two threads waiting on the same waiter is undefined (and definitely won&#39;t work, so don&#39;t do it). SbSocketWaiters are not thread-safe, except for the SbSocketWaiterWakeUp() function, and don&#39;t expect to be modified concurrently.</p>

<h4 id="sbsocketwaiterdestroy">SbSocketWaiterDestroy</h4>

<p>Destroys a socket waiter. This will also remove all sockets still registered by way of SbSocketWaiterAdd. This function may be called on any thread, but only if there is no worry of concurrent access to the waiter.</p>

<h4 id="sbsocketwaiterremove">SbSocketWaiterRemove</h4>

<p>Removes <code class="prettyprint">socket</code> from <code class="prettyprint">waiter</code>, previously added with SbSocketWaiterAdd. If <code class="prettyprint">socket</code> wasn&#39;t registered with <code class="prettyprint">waiter</code>, then this does nothing. This should only be called on the thread that waits on this waiter.</p>

<h4 id="sbsocketwaiterwait">SbSocketWaiterWait</h4>

<p>Waits on all registered sockets, calling the registered callbacks if and when the corresponding sockets become ready for an interested operation. This version exits only after SbSocketWaiterWakeUp() is called. This should only be called on the thread that waits on this waiter.</p>

<h4 id="sbsocketwaiterwaittimed">SbSocketWaiterWaitTimed</h4>

<p>Behaves the same as SbSocketWaiterWait(), waking up when SbSocketWaiterWakeUp(), but also exits on its own after at least <code class="prettyprint">duration</code> has passed, whichever comes first, returning an indicator of which one happened. Note that, as with SbThreadSleep(), it may wait longer than <code class="prettyprint">duration</code>. For example if the timeout expires while a callback is being fired. This should only be called on the thread that waits on this waiter.</p>

<h4 id="sbsocketwaiterwakeup">SbSocketWaiterWakeUp</h4>

<p>Wakes up <code class="prettyprint">waiter</code> once. Can be called from a SbSocketWaiterCallback to wake up its own waiter. Can also be called from another thread at any time, it&#39;s the only thread-safe waiter function. In either case, the waiter will exit the next wait gracefully, first completing any in-progress callback.  For every time this function is called, it will cause the waiter to wake up one time. This is true whether the waiter is currently waiting or not. If not waiting, it will just take affect immediately the next time the waiter waits. The number of wake-ups accumulate and are only consumed by waiting and getting woken up. e.g. If you call this function 7 times, then SbSocketWaiterWait() and WaitTimed() will not block the next 7 times they are called.</p>

<h2 id="spin_lock-h">spin_lock.h</h2>

<h2 id="storage-h">storage.h</h2>

<h4 id="sbstoragecloserecord">SbStorageCloseRecord</h4>

<p>Closes <code class="prettyprint">record</code>, synchronously ensuring all written data is flushed, and returning whether the operation was successful. Storage writes should be as atomic as possible, so either the record should be fully written, or it should delete the record (or, even better, leave it untouched). <code class="prettyprint">record</code> will be invalidated after this point, and subsequent calls to <code class="prettyprint">record</code> will fail. Performs blocking I/O on the calling thread.</p>

<h4 id="sbstoragedeleterecord">SbStorageDeleteRecord</h4>

<p>Deletes <code class="prettyprint">user</code>&#39;s storage record, returning whether the record both existed and was successfully deleted. This must not be called while <code class="prettyprint">user</code>&#39;s storage record is open. This function performs blocking I/O on the calling thread.</p>

<h4 id="sbstoragegetrecordsize">SbStorageGetRecordSize</h4>

<p>Returns the size of <code class="prettyprint">record</code>, or -1 on error. Performs blocking I/O on the calling thread.</p>

<h4 id="sbstorageopenrecord">SbStorageOpenRecord</h4>

<p>Opens the storage record for <code class="prettyprint">user</code>, providing a handle to the opened record. <code class="prettyprint">user</code> must be a valid SbUser, or kSbStorageInvalidRecord will be returned. Performs blocking I/O on the calling thread.</p>

<h4 id="sbstoragereadrecord">SbStorageReadRecord</h4>

<p>Reads up to <code class="prettyprint">data_size</code> bytes from <code class="prettyprint">record</code> into <code class="prettyprint">out_data</code>, starting at the beginning of the record. Returns the number of actual bytes read, which must be &lt;= <code class="prettyprint">size</code>, or -1 on error. This function makes a best-effort and performs blocking I/O on the calling thread.</p>

<h4 id="sbstoragewriterecord">SbStorageWriteRecord</h4>

<p>Replaces the data in <code class="prettyprint">record</code> with <code class="prettyprint">size</code> bytes from <code class="prettyprint">data</code>. This always deletes any previous data in that record. Returns whether the write succeeded. This function makes a best-effort and performs blocking I/O on the calling thread.</p>

<h2 id="string-h">string.h</h2>

<h4 id="sbstringcompare">SbStringCompare</h4>

<p>Compares the first <code class="prettyprint">count</code> characters of <code class="prettyprint">string1</code> and <code class="prettyprint">string2</code>, which are 8-bit character strings. Returns &lt; 0 if <code class="prettyprint">string1</code> is ASCII-betically lower than <code class="prettyprint">string2</code>, 0 if they are equal, and &gt; 0 if <code class="prettyprint">string1</code> is ASCII-betically higher than <code class="prettyprint">string2</code>. Meant to be a drop-in replacement of strncmp.</p>

<h4 id="sbstringcompareall">SbStringCompareAll</h4>

<p>Compares all the characters of <code class="prettyprint">string1</code> and <code class="prettyprint">string2</code>, which are 8-bit character strings, up to their natural termination. Returns &lt; 0 if <code class="prettyprint">string1</code> is ASCII-betically lower than <code class="prettyprint">string2</code>, 0 if they are equal, and &gt; 0 if <code class="prettyprint">string1</code> is ASCII-betically higher than <code class="prettyprint">string2</code>. Meant to be a drop-in replacement of strcmp.</p>

<h4 id="sbstringcomparenocase">SbStringCompareNoCase</h4>

<p>Compares <code class="prettyprint">string1</code> and <code class="prettyprint">string2</code>, ignoring differences in case. Returns &lt; 0 if <code class="prettyprint">string1</code> is ASCII-betically lower than <code class="prettyprint">string2</code>, 0 if they are equal, and &gt; 0 if <code class="prettyprint">string1</code> is ASCII-betically higher than <code class="prettyprint">string2</code>. Meant to be a drop-in replacement for strcasecmp.</p>

<h4 id="sbstringcomparenocasen">SbStringCompareNoCaseN</h4>

<p>Compares the first <code class="prettyprint">count</code> characters of <code class="prettyprint">string1</code> and <code class="prettyprint">string2</code>, ignoring differences in case. Returns &lt; 0 if <code class="prettyprint">string1</code> is ASCII-betically lower than <code class="prettyprint">string2</code>, 0 if they are equal, and &gt; 0 if <code class="prettyprint">string1</code> is ASCII-betically higher than <code class="prettyprint">string2</code>. Meant to be a drop-in replacement for strncasecmp.</p>

<h4 id="sbstringcomparewide">SbStringCompareWide</h4>

<p>Inline wrapper of SbStringFormatWide to convert from ellipsis to va_args. Compares the first <code class="prettyprint">count</code> characters of <code class="prettyprint">string1</code> and <code class="prettyprint">string2</code>, which are 16-bit character strings. Returns &lt; 0 if <code class="prettyprint">string1</code> is ASCII-betically lower than <code class="prettyprint">string2</code>, 0 if they are equal, and &gt; 0 if <code class="prettyprint">string1</code> is ASCII-betically higher than <code class="prettyprint">string2</code>. Meant to be a drop-in replacement of wcsncmp.</p>

<h4 id="sbstringconcat">SbStringConcat</h4>

<p>Concatenates <code class="prettyprint">source</code> onto the end of <code class="prettyprint">out_destination</code>, presuming it has <code class="prettyprint">destination_size</code> total characters of storage available. Returns the length of <code class="prettyprint">source</code>.</p>

<h4 id="sbstringconcatwide">SbStringConcatWide</h4>

<p>Inline wrapper for an unsafe SbStringConcat that assumes <code class="prettyprint">out_destination</code> is big enough. Meant to be a drop-in replacement for strcat. Same as SbStringConcat but for wide characters.</p>

<h4 id="sbstringcopy">SbStringCopy</h4>

<p>Copies as much <code class="prettyprint">source</code> as possible into <code class="prettyprint">out_destination</code> and null-terminates it, given that it has <code class="prettyprint">destination_size</code> characters of storage available. Returns the length of <code class="prettyprint">source</code>.</p>

<h4 id="sbstringcopywide">SbStringCopyWide</h4>

<p>Inline wrapper for an unsafe SbStringCopy that assumes <code class="prettyprint">out_destination</code> is big enough. Meant to be a drop-in replacement for strcpy. Same as SbStringCopy but for wide characters.</p>

<h4 id="sbstringduplicate">SbStringDuplicate</h4>

<p>Copies the string <code class="prettyprint">source</code> into a buffer allocated by this function that can be freed with SbMemoryFree. Meant to be a drop-in replacement for strdup.</p>

<h4 id="sbstringformat">SbStringFormat</h4>

<p>Formats the given <code class="prettyprint">format</code> and <code class="prettyprint">arguments</code>, placing as much of the result will fit in <code class="prettyprint">out_buffer</code>, whose size is specified by <code class="prettyprint">buffer_size</code>. Returns the number of characters the format would produce if <code class="prettyprint">buffer_size</code> was infinite. Meant to be a drop-in replacement for vsnprintf.</p>

<h4 id="sbstringformatwide">SbStringFormatWide</h4>

<p>Inline wrapper of SbStringFormat to convert from ellipsis to va_args. Meant to be a drop-in replacement for snprintf. Inline wrapper of SbStringFormat to be a drop-in replacement for the unsafe but commonly used sprintf. Same as SbStringFormat, but for wide characters. Meant to be a drop-in replacement for vswprintf.</p>

<h4 id="sbstringgetlength">SbStringGetLength</h4>

<p>Returns the length, in characters, of <code class="prettyprint">str</code>, a zero-terminated ASCII string.</p>

<h4 id="sbstringgetlengthwide">SbStringGetLengthWide</h4>

<p>Same as SbStringGetLength but for wide characters. This assumes that there are no multi-element characters.</p>

<h4 id="sbstringparsesignedinteger">SbStringParseSignedInteger</h4>

<p>Inline wrapper of SbStringScan to convert from ellipsis to va_args. Meant to be a drop-in replacement for sscanf. Parses a string at the beginning of <code class="prettyprint">start</code> into a signed integer in the given <code class="prettyprint">base</code>.  It will place the pointer to the end of the consumed portion of the string in <code class="prettyprint">out_end</code>, if it is provided. Meant to be a drop-in replacement for strtol. NOLINTNEXTLINE(runtime/int)</p>

<h4 id="sbstringparseuint64">SbStringParseUInt64</h4>

<p>Parses a string at the beginning of <code class="prettyprint">start</code> into a unsigned 64-bit integer in the given <code class="prettyprint">base</code>.  It will place the pointer to the end of the consumed portion of the string in <code class="prettyprint">out_end</code>, if it is provided. Meant to be a drop-in replacement for strtoull, but explicity declared to return uint64_t.</p>

<h4 id="sbstringscan">SbStringScan</h4>

<p>Scans <code class="prettyprint">buffer</code> for <code class="prettyprint">pattern</code>, placing the extracted values in <code class="prettyprint">arguments</code>. Returns the number of successfully matched items, which may be zero. Meant to be a drop-in replacement for vsscanf.</p>

<h4 id="char">char</h4>

<p>Finds the first occurrence of <code class="prettyprint">str2</code> in <code class="prettyprint">str1</code>, returning a pointer to the beginning of the found occurrencein <code class="prettyprint">str1</code>, or NULL if not found.  Meant to be a drop-in replacement for strstr.</p>

<h4 id="long">long</h4>

<p>Shorthand replacement for atoi. Parses <code class="prettyprint">value</code> into a base-10 int. NOLINTNEXTLINE(readability/casting) Shorthand replacement for atol. Parses <code class="prettyprint">value</code> into a base-10 int. NOLINTNEXTLINE(runtime/int) NOLINTNEXTLINE(readability/casting) Parses a string at the beginning of <code class="prettyprint">start</code> into a unsigned integer in the given <code class="prettyprint">base</code>.  It will place the pointer to the end of the consumed portion of the string in <code class="prettyprint">out_end</code>, if it is provided. Meant to be a drop-in replacement for strtol. NOLINTNEXTLINE(runtime/int)</p>

<h2 id="system-h">system.h</h2>

<h4 id="sbsystembinarysearch">SbSystemBinarySearch</h4>

<p>Binary searches a sorted table <code class="prettyprint">base</code> of <code class="prettyprint">element_count</code> objects, each element <code class="prettyprint">element_width</code> bytes in size for an element that <code class="prettyprint">comparator</code> compares equal to <code class="prettyprint">key</code>. Meant to be a drop-in replacement for bsearch.</p>

<h4 id="sbsystembreakintodebugger">SbSystemBreakIntoDebugger</h4>

<p>Pointer to a function to compare two items, returning less than zero, zero, or greater than zero depending on whether <code class="prettyprint">a</code> is less than <code class="prettyprint">b</code>, equal to <code class="prettyprint">b</code>, or greater than <code class="prettyprint">b</code>, respectively (standard *cmp semantics). Breaks the current program into the debugger, if a debugger is attached. Aborts the program otherwise.</p>

<h4 id="sbsystemclearlasterror">SbSystemClearLastError</h4>

<p>Clears the last error set by a Starboard call in the current thread.</p>

<h4 id="sbsystemclearplatformerror">SbSystemClearPlatformError</h4>

<p>Clears a platform error that was previously raised by a call to <code class="prettyprint">SbSystemRaisePlatformError</code>, specified by the handle that was returned by that function. The platform may use this, for example, to close a dialog that was opened in response to the error.</p>

<h4 id="sbsystemgetconnectiontype">SbSystemGetConnectionType</h4>

<p>Returns the device&#39;s current network connection type.</p>

<h4 id="sbsystemgetdevicetype">SbSystemGetDeviceType</h4>

<p>Returns the type of the device.</p>

<h4 id="sbsystemgeterrorstring">SbSystemGetErrorString</h4>

<p>Writes a human-readable string for <code class="prettyprint">error</code>, up to <code class="prettyprint">string_length</code> bytes, into the provided <code class="prettyprint">out_string</code>. Returns the total desired length of the string. <code class="prettyprint">out_string</code> may be null, in which case just the total desired length of the string is returned. <code class="prettyprint">out_string</code> is always terminated with a null byte.</p>

<h4 id="sbsystemgetlasterror">SbSystemGetLastError</h4>

<p>Gets the last platform-specific error code produced by any Starboard call in the current thread for diagnostic purposes. Semantic reactions to Starboard function call results should be modeled explicitly.</p>

<h4 id="sbsystemgetnumberofprocessors">SbSystemGetNumberOfProcessors</h4>

<p>Returns the number of processor cores available to this application. If the process is sandboxed to a subset of the physical cores, it will return that sandboxed limit.</p>

<h4 id="sbsystemgetpath">SbSystemGetPath</h4>

<p>Gets the platform-defined system path specified by <code class="prettyprint">path_id</code>, placing it as a zero-terminated string into the user-allocated <code class="prettyprint">out_path</code>, unless it is longer than <code class="prettyprint">path_length</code> - 1. Returns false if <code class="prettyprint">path_id</code> is invalid for this platform, or if <code class="prettyprint">path_length</code> is too short for the given result, or if <code class="prettyprint">out_path</code> is NULL. On failure, <code class="prettyprint">out_path</code> will not be changed. Implementation must be thread-safe.</p>

<h4 id="sbsystemgetproperty">SbSystemGetProperty</h4>

<p>Gets the platform-defined system property specified by <code class="prettyprint">property_id</code>, placing it as a zero-terminated string into the user-allocated <code class="prettyprint">out_value</code>, unless it is longer than <code class="prettyprint">value_length</code> - 1. Returns false if <code class="prettyprint">property_id</code> is invalid for this platform, or if <code class="prettyprint">value_length</code> is too short for the given result, or if <code class="prettyprint">out_value</code> is NULL. On failure, <code class="prettyprint">out_value</code> will not be changed. Implementation must be thread-safe.</p>

<h4 id="sbsystemgetrandomdata">SbSystemGetRandomData</h4>

<p>Produces an arbitrary non-negative number, <code class="prettyprint">buffer_size</code>, of random bytes which must not be negative, placing the result in <code class="prettyprint">out_buffer</code>, which must not be null. This is expected to be a cryptographically secure random number generator, and doesn&#39;t require manual seeding.</p>

<h4 id="sbsystemgetrandomuint64">SbSystemGetRandomUInt64</h4>

<p>Gets sixty-four random bits returned as an uint64_t. This is expected to be a cryptographically secure random number generator, and doesn&#39;t require manual seeding.</p>

<h4 id="sbsystemgetstack">SbSystemGetStack</h4>

<p>Places up to <code class="prettyprint">stack_size</code> instruction pointer addresses of the current execution stack into <code class="prettyprint">out_stack</code>, returning the number of entries populated. <code class="prettyprint">out_stack</code> must point to a non-NULL array of void * of at least <code class="prettyprint">stack_size</code> entries. The returned stack frames will be in &quot;downward&quot; order from the calling frame towards the entry point of the thread. So, if all the stack frames do not fit, the ones truncated will be the less interesting ones towards the thread entry point. This function must be async-signal-safe on platforms that support signals, as it will be used in crash signal handlers.  See the following about what it means to be async-signal-safe on POSIX: <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html#tag_02_04_03">http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html#tag_02_04_03</a></p>

<h4 id="sbsystemgettotalmemory">SbSystemGetTotalMemory</h4>

<p>Gets the total memory potentially available to this application. If the process is sandboxed to a maximum allowable limit, it will return the lesser of the physical and sandbox limits.</p>

<h4 id="sbsystemhascapability">SbSystemHasCapability</h4>

<p>Returns whether the platform has the runtime capability specified by <code class="prettyprint">capability_id</code>. Returns false for any unknown capabilities. Implementation must be thread-safe.</p>

<h4 id="sbsystemisdebuggerattached">SbSystemIsDebuggerAttached</h4>

<p>Attempts to determine if the current program is running inside or attached to a debugger.</p>

<h4 id="sbsystemistvdevicetype">SbSystemIsTvDeviceType</h4>

<p>Returns whether the device is a TV device.</p>

<h4 id="sbsystemraiseplatformerror">SbSystemRaisePlatformError</h4>

<p>Called by Cobalt to notify the platform that an error has occurred in the application that may have to be handled by the platform. It is expected the platform will notify the user of the error, and provide interaction if required, for example by showing a dialog.  <code class="prettyprint">type</code> is one of the enumerated types above to define the error; <code class="prettyprint">callback</code> is a function that may be called by the platform to let the caller know the user has reacted to the error; <code class="prettyprint">user_data</code> is an opaque pointer that the platform should pass as an argument to the callback, if called. Returns a handle that may be used in a subsequent call to <code class="prettyprint">SbClearPlatformError</code>, for example to programatically dismiss a dialog that may have been raised in response to the error. The lifetime of the object referenced by the handle is until the user reacts to the error or the error is dismissed by a call to <code class="prettyprint">SbSystemClearPlatformError</code>, whichever happens first. If the platform cannot respond to the error, then this function should return <code class="prettyprint">kSbSystemPlatformErrorInvalid</code>.  This function may be called from any thread; it is the responsibility of the platform to decide how to handle an error received while a previous error is still pending - if only one error can be handled at a time, then the platform may queue the second error or ignore it by returning <code class="prettyprint">kSbSystemPlatformErrorInvalid</code>.</p>

<h4 id="sbsystemrequeststop">SbSystemRequestStop</h4>

<p>Requests that the application be terminated gracefully at the next convenient point. Some work may continue to be done, and unrelated system events dispatched, in the meantime. This will eventually result in a kSbEventTypeStop event being dispatched to the application.  When the process finally terminates, it will return <code class="prettyprint">error_level</code>, if that has any meaning on the current platform.</p>

<h4 id="sbsystemsort">SbSystemSort</h4>

<p>Sorts an array of elements <code class="prettyprint">base</code>, with <code class="prettyprint">element_count</code> elements of <code class="prettyprint">element_width</code> bytes each, using <code class="prettyprint">comparator</code> as the comparison function. Meant to be a drop-in replacement for qsort.</p>

<h4 id="sbsystemsymbolize">SbSystemSymbolize</h4>

<p>Looks up <code class="prettyprint">address</code> as an instruction pointer and places up to <code class="prettyprint">buffer_size</code> - 1 characters of the symbol associated with it in <code class="prettyprint">out_buffer</code>, which must not be NULL. <code class="prettyprint">out_buffer</code> will be NULL-terminated. Returns whether it found a reasonable match for <code class="prettyprint">address</code>. If the return value is false, <code class="prettyprint">out_buffer</code> will not be modified. This function must be async-signal-safe on platforms that support signals, as it will be used in crash signal handlers.</p>

<h4 id="char">char</h4>

<p>Gets the system&#39;s current POSIX-style Locale ID. The locale represents the location, language, and cultural conventions that the system wants to use, which affects which text is displayed to the user, and how display numbers, dates, currency, and the like are formatted.  At its simplest, it can just be a BCP 47 language code, like &quot;en_US&quot;. These days, POSIX also wants to include the encoding, like &quot;en_US.UTF8&quot;. POSIX additionally allows a couple very bare-bones locales, like &quot;C&quot; or &quot;POSIX&quot;, but they are not supported here. POSIX also supports different locale settings for a few different purposes, but Starboard only exposes a single locale at a time.  RFC 5646 describing BCP 47 language codes: <a href="https://tools.ietf.org/html/bcp47">https://tools.ietf.org/html/bcp47</a>  For more information than you want on POSIX locales: <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap07.html">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap07.html</a></p>

<h2 id="thread-h">thread.h</h2>

<h4 id="sbthreadcreate">SbThreadCreate</h4>

<p>Creates a new thread, which starts immediately. The <code class="prettyprint">stack_size</code> parameter can be 0 to indicate that the default stack size should be used. <code class="prettyprint">priority</code> can be set to kSbThreadNoPriority to use the default priority for the platform (e.g. possibly a fixed, standard priority, or possibly a priority inherited from the thread that is calling SbThreadCreate()). <code class="prettyprint">affinity</code> can be set to kSbThreadNoAffinity to use the default affinity for the platform. <code class="prettyprint">joinable</code> sets whether the thread can be joined, or should start out &quot;detached.&quot; <code class="prettyprint">name</code> is mainly used for debugging, may be NULL, and may not even be used in production builds. Returns a handle to the newly created thread upon success, and returns kSbThreadInvalid if not. <code class="prettyprint">entry_point</code> will be executed on the newly created thread, and passed <code class="prettyprint">context</code>.  NOTE: For joinable threads, when you are done with the thread handle, you must call SbThreadJoin to release system resources associated with the thread. This is not necessary for detached threads, but a detached thread cannot be joined.</p>

<h4 id="sbthreadcreatelocalkey">SbThreadCreateLocalKey</h4>

<p>Creates a new, unique key for thread local data with given optional <code class="prettyprint">destructor</code>. <code class="prettyprint">destructor</code> may be NULL if there is no clean up needed. Returns kSbThreadLocalKeyInvalid if creation was unsuccessful.  When does <code class="prettyprint">destructor</code> get called? It can only be called in the owning thread, and let&#39;s just say thread interruption isn&#39;t viable. The destructor, if specified, is called on every thread&#39;s local values when the thread exits.</p>

<h4 id="sbthreaddestroylocalkey">SbThreadDestroyLocalKey</h4>

<p>Destroys thread local data <code class="prettyprint">key</code>. Does nothing if key is kSbThreadLocalKeyInvalid or has already been destroyed. This does NOT call the destructor on any stored values.</p>

<h4 id="sbthreaddetach">SbThreadDetach</h4>

<p>Detaches <code class="prettyprint">thread</code>, which prevents it from being joined. This is sort of like a non-blocking join. Does nothing if the thread is already detached, or is already being joined by another thread.</p>

<h4 id="sbthreadgetcurrent">SbThreadGetCurrent</h4>

<p>Gets the handle of the currently executing thread.</p>

<h4 id="sbthreadgetid">SbThreadGetId</h4>

<p>Gets the Thread ID of the currently executing thread.</p>

<h4 id="sbthreadgetlocalvalue">SbThreadGetLocalValue</h4>

<p>Gets the pointer-sized value for <code class="prettyprint">key</code> in the currently executing thread&#39;s local storage. Returns NULL if key is kSbThreadLocalKeyInvalid or has already been destroyed.</p>

<h4 id="sbthreadgetname">SbThreadGetName</h4>

<p>Gets the debug name of the currently executing thread.</p>

<h4 id="sbthreadisequal">SbThreadIsEqual</h4>

<p>Returns whether <code class="prettyprint">thread1</code> and <code class="prettyprint">thread2</code> refer to the same thread.</p>

<h4 id="sbthreadjoin">SbThreadJoin</h4>

<p>Joins with joinable <code class="prettyprint">thread</code>, created with SbThreadCreate.  This function blocks the caller until the designated thread exits, and then cleans up that thread&#39;s resources.  Returns true on success, false if <code class="prettyprint">thread</code> is invalid or detached. This will essentially detach <code class="prettyprint">thread</code>. Each joinable thread must be joined to be fully cleaned up. If <code class="prettyprint">out_return</code> is not NULL, the return value of the thread&#39;s main function is placed there.  Each joinable thread can only be joined once. Once SbThreadJoin is called, the thread behaves as if it was detached to all threads other than the joining thread.</p>

<h4 id="sbthreadsetlocalvalue">SbThreadSetLocalValue</h4>

<p>Sets the pointer-sized value for <code class="prettyprint">key</code> in the currently executing thread&#39;s local storage. Returns whether <code class="prettyprint">key</code> is valid and has not already been destroyed.</p>

<h4 id="sbthreadsetname">SbThreadSetName</h4>

<p>Sets the debug name of the currently executing thread. Will copy the specified name string.</p>

<h4 id="sbthreadsleep">SbThreadSleep</h4>

<p>Sleeps the currently executing thread for at least the given <code class="prettyprint">duration</code>. A negative duration does nothing.</p>

<h4 id="sbthreadyield">SbThreadYield</h4>

<p>Yields the currently executing thread, so another thread has a chance to run.</p>

<h2 id="thread_types-h">thread_types.h</h2>

<h2 id="time-h">time.h</h2>

<h4 id="sbtimegetmonotonicnow">SbTimeGetMonotonicNow</h4>

<p>Gets a monotonically increasing time representing right now.</p>

<h4 id="sbtimegetnow">SbTimeGetNow</h4>

<p>Gets the current system time as a SbTime.</p>

<h2 id="time_zone-h">time_zone.h</h2>

<h4 id="sbtimezonegetcurrent">SbTimeZoneGetCurrent</h4>

<p>Gets the system&#39;s current SbTimeZone.</p>

<h4 id="char">char</h4>

<p>Gets the three-letter code of the current timezone in Daylight Savings Time, regardless of current DST status. (e.g. &quot;PDT&quot;)</p>

<h2 id="types-h">types.h</h2>

<h2 id="user-h">user.h</h2>

<h4 id="sbusergetcurrent">SbUserGetCurrent</h4>

<p>Gets the current primary user, if any. This is the user that is determined, in a platform specific way, to be the primary user controlling the application. This may be because that user launched the app, or using whatever criteria is appropriate for the platform. It is expected that there will be a unique SbUser per signed in user, and that the referenced objects will persist for the lifetime of the app.</p>

<h4 id="sbusergetproperty">SbUserGetProperty</h4>

<p>Gets the value of <code class="prettyprint">property_id</code> for <code class="prettyprint">user</code>, and places it in <code class="prettyprint">out_value</code>, returning false if <code class="prettyprint">user</code> is invalid, <code class="prettyprint">property_id</code> isn&#39;t recognized, supported, or set for <code class="prettyprint">user</code>, or if <code class="prettyprint">value_size</code> is too small.</p>

<h4 id="sbusergetpropertysize">SbUserGetPropertySize</h4>

<p>Gets the size of the value of <code class="prettyprint">property_id</code> for <code class="prettyprint">user</code>, INCLUDING the terminating null character. Returns 0 if if <code class="prettyprint">user</code> is invalid, <code class="prettyprint">property_id</code> isn&#39;t recognized, supported, or set for <code class="prettyprint">user</code>.</p>

<h4 id="sbusergetsignedin">SbUserGetSignedIn</h4>

<p>Gets a list of up to <code class="prettyprint">users_size</code> signed-in users, placing the results in <code class="prettyprint">out_users</code>, and returning the number of actual users signed in, whether greater or less than <code class="prettyprint">users_size</code>. It is expected that there will be a unique SbUser per signed in user, and that the referenced objects will persist for the lifetime of the app.</p>

<h4 id="sbusermaxauthenticationtokensizeinbytes">SbUserMaxAuthenticationTokenSizeInBytes</h4>

<p>Gets the maximum size of an authentication token as returned by SbUserRequestApplicationLinking and SbUserRequestAuthenticationToken.</p>

<h4 id="sbuserrequestapplicationlinking">SbUserRequestApplicationLinking</h4>

<p>Initiates a process to link <code class="prettyprint">user</code> with a per-application authentication token. On success, <code class="prettyprint">out_token</code> is populated with the authentication token and <code class="prettyprint">out_expiry</code> is set to the number of seconds until the token expires. An expiration of 0 indicates that the token never expires. This call will block until the linking process is complete, which may involve user input. After this call completes successfully, subsequent calls to SbUserRequestAuthenticationToken will return valid tokens. Returns false if <code class="prettyprint">user</code> is invalid, <code class="prettyprint">token_results</code> is NULL, <code class="prettyprint">token_results.token_buffer</code> is NULL or if the token is larger than <code class="prettyprint">token_results.token_buffer_size</code>. Returns true if process to link the token succeeded, and false if the process failed for any reason including user cancellation.</p>

<h4 id="sbuserrequestapplicationunlinking">SbUserRequestApplicationUnlinking</h4>

<p>Remove the link between <code class="prettyprint">user</code> and the per-application authentication token. This call will block until the linking process is complete, which may involve user input. After this call completes successfully, subsequent calls to SbUserRequestAuthenticationToken will fail. Returns false if <code class="prettyprint">user</code> is invalid. Returns true if the process to unlink the token succeeded. Returns false if the process failed for any reason including user cancellation.</p>

<h4 id="sbuserrequestauthenticationtoken">SbUserRequestAuthenticationToken</h4>

<p>Requests a new per-application authentication token. On success, <code class="prettyprint">out_token</code> is populated with the authentication token and <code class="prettyprint">out_expiry</code> is set to the number of seconds until the token expires. An expiration of 0 indicates that the token never expires. This call will block until the token has been received. Returns false if <code class="prettyprint">user</code> is invalid, <code class="prettyprint">out_token</code> or <code class="prettyprint">out_expiration</code> are NULL, or if the token is larger than <code class="prettyprint">out_token_size</code>. Returns false if the user account is not linked with an application. In this case, SbUserRequestApplicationLinking should be called. Returns true if process to link the token succeeded, and false if the process failed for any reason including user cancellation.</p>

<h2 id="window-h">window.h</h2>

<h4 id="sbwindowcreate">SbWindowCreate</h4>

<p>Creates a new system window with the given <code class="prettyprint">options</code>, which may be NULL. Returns kSbWindowInvalid if unable to create the requested SbWindow, either due to policy, or unsatisfiable options.  If options are not specified, this function will use all defaults, which must work on every platform. In general, it defaults to creating a fullscreen window at the highest 16:9 resolution that it can. If the platform does not support fullscreen windows, then it will create a normal windowed window.  Some devices are fullscreen-only (most of the production targets for Starboard). In those cases, only one SbWindow may be created, and it must be fullscreen. Additionally, the requested size will actually be the requested resolution, and must be a supported resolution, as specified by the resolutions returned by SbWindowGetSupportedResolutionIterator().  A SbWindow must be created in order to receive window-based events, like input events, even on fullscreen-only devices. These will be dispatched to the Starboard entry point.</p>

<h4 id="sbwindowdestroy">SbWindowDestroy</h4>

<p>Destroys <code class="prettyprint">window</code>, reclaiming associated resources.</p>

<h4 id="sbwindowgetplatformhandle">SbWindowGetPlatformHandle</h4>

<p>Gets the platform-specific handle for <code class="prettyprint">window</code>, which can be passed as an EGLNativeWindowType to initialize EGL/GLES. This return value is entirely platform specific, so there are no constraints about expected ranges.</p>

<h4 id="sbwindowgetsize">SbWindowGetSize</h4>

<p>Sets <code class="prettyprint">size</code> to the dimensions of the window.  Returns true on success.</p>

<h4 id="sbwindowsetdefaultoptions">SbWindowSetDefaultOptions</h4>

<p>Sets <code class="prettyprint">options</code> to all the defaults. <code class="prettyprint">options</code> must not be NULL.</p>

        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    
      <footer>
<div class="container">
    <div class="row">
      
        <div class="col-md-5 column-left">
          
          
            
              
  
    <span class="copyright-text">© Cobalt 2016</span>
  


            
            
            
            
            
          
            
            
            
              
                <span class="footer-link"><a href="/terms.html">Terms</a></span>
              
            
            
            
          
            
            
              
  <span class="contact-email"><a href="mailto:noreply@example.org">noreply@example.org</a></span>


            
            
            
            
          
        </div>
      
        <div class="col-md-2 column-middle">
          
          
            
            
            
            
              
  <img class="footer-logo" src="/images/cobalt-logo.png" alt="Cobalt"/>


            
            
          
        </div>
      
        <div class="col-md-5 column-right">
          
          
            
            
            
            
            
              <div id="sharing-services">
  
  
    
      <script type="text/javascript">
        createShareButton("delicious", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("digg", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("facebook", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("google_plus", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("linkedin", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("meneame", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("nujij", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("reddit", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("stumbleupon", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("tumblr", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("twitter", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
    
      <script type="text/javascript">
        createShareButton("weibo", "http://172.24.182.105:4002/",
                          "/reference/starboard/modules.html", "Starboard Modules - Reference Guide", "footer");
      </script>
    
  
</div>

            
          
        </div>
      
<!--
          
          <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-share-button" data-href="/reference/starboard/modules.html" data-layout=""></div>
&nbsp;
          <a href="https://twitter.com/" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false" data-size=""></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


-->
    </div>
</div>
</footer>

    

    <!-- TODO: Make sure no badness from moving common.js to styles.liquid -->

    
  </body>
</html>
